<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>QPF - QLA Processing Framework Config. file</title>
<!-- 2016-04-22 vie 12:36 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Jose C. Gonzalez" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">QPF - QLA Processing Framework Config. file</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. QPF - QLA Processing Framework</a>
<ul>
<li><a href="#sec-1-1">1.1. Introduction</a>
<ul>
<li><a href="#sec-1-1-1">1.1.1. Euclid Operations Main Entities</a></li>
<li><a href="#sec-1-1-2">1.1.2. Euclid SOC Architecture Design</a></li>
<li><a href="#sec-1-1-3">1.1.3. QLA Subsystem</a></li>
</ul>
</li>
<li><a href="#sec-1-2">1.2. The QLA Processing Framework (QPF)</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1. Purpose</a></li>
<li><a href="#sec-1-2-2">1.2.2. QPF Overall Architecture</a></li>
<li><a href="#sec-1-2-3">1.2.3. QPF Components</a></li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. QPF Internals</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1. Technologies</a></li>
<li><a href="#sec-1-3-2">1.3.2. Specification</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<p>
#<a href="http://easdps01.esac.esa.int:8000/DbView">http://easdps01.esac.esa.int:8000/DbView</a>
#<a href="https://euclidsoc.esac.esa.int:8300/{status,jobs,files">https://euclidsoc.esac.esa.int:8300/{status,jobs,files</a>}
#<a href="http://archives.esac.esa.int/esasky-beta">http://archives.esac.esa.int/esasky-beta</a>
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> QPF - QLA Processing Framework</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Introduction</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> Euclid Operations Main Entities</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
The main elements interfacing each other at the mission operation phase are the <b>Science Operations Centre</b> (SOC) and the <b>Mission Operations Centre</b> (MOC). In addition, there are two Instrument Operations Teams (IOTs), responsible for the definition of the instrument operational procedures as well as to ensure the operability of the different instruments along the mission.
</p>
</div>

<ol class="org-ol"><li><a id="sec-1-1-1-1" name="sec-1-1-1-1"></a>Mission Operations Centre<br  /><div class="outline-text-5" id="text-1-1-1-1">
<p>
The Euclid Mission Operations Centre at ESOC is the responsible for the consolidation and uplink of all the telecommanding to Euclid, including those related to instrument operations. It is also the responsible to obtain the telemetry generated on board, and make it available to the SOC and, (through MOC infrastructures), to the IOTs-SDCs during the Commissioning and PV phases, and for contingencies.
</p>

<p>
Being the responsible to uplink telecommands, it is the final responsible to guarantee the instrument safety and health, following the given criteria and procedures provided by IOTs.
</p>

<p>
The MOC shall also act as configuration control holder of the instruments operational DBs (MIB), being the entity in charge of its formal dissemination to SOC and operational deployment.
</p>
</div>
</li>

<li><a id="sec-1-1-1-2" name="sec-1-1-1-2"></a>Science Operations Centre<br  /><div class="outline-text-5" id="text-1-1-1-2">
<p>
The Science Operations Centre at ESAC is the responsible of the Survey execution. It generates the required commanding requests to ensure its fulfilment as well as the routine calibration plan. It also acts as formal interface from the IOT’s to the MOC during the routine mission, consolidating instrument operational requests against the on-going survey, and if required and not covered by a coordinating IOT entity, across instrument consolidation. It is part of the Instrument Monitoring to provide a quick look assessment on the instrument performance and survey execution.
</p>

<p>
The SOC is the entity responsible to gather the data provided by the MOC and make it available to the rest of the Science Ground Segment in appropriate format, generating the Level 1. The content and format of Level 1 is not part of this document, but it is foreseen that will comprise the scientific, house-keeping and ancillary information received from MOC.
</p>
</div>
</li>

<li><a id="sec-1-1-1-3" name="sec-1-1-1-3"></a>Instrument Operation Teams<br  /><div class="outline-text-5" id="text-1-1-1-3">
<p>
The Instrument Operations Teams are the entities responsible to define the Instrument Operations, mainly the instrument operational procedures, the instrument DBs and the criteria for instrument safety and health, as well as for instrument monitoring. They must ensure operability along the mission, and also ensure optimal operations strategy through an overall instrument monitoring, capability to update or modify the instrument SW, DB or procedures, and generate updates to the calibration and characterisation. They should inherit and build on expertise from the Instrument Development Teams, in order to understand and react to instrument anomalies and also to assess instrument data.
</p>

<p>
The two IOT’s will have a single IOT coordinator that will act as single point of contact regarding overall system architecture, issues of mutual concern and also as main responsible of ensuring towards SOC (and therefore MOC) the coordination of combined instrument activities.
</p>
</div>
</li>

<li><a id="sec-1-1-1-4" name="sec-1-1-1-4"></a>Science Data Centres<br  /><div class="outline-text-5" id="text-1-1-1-4">
<p>
The Science Data Centres are entrusted to run pipelines to process the Science Telemetry of the instruments. Part of this process can encompass the Instrument Monitoring assessment and flagging, to be used by IOTs in identification of trends or misbehaviours, and also to process specific calibration observations that may end up in updates to On Board or Ground items. However, it could also be the case that the IOT’s themselves will be OU-SDC’s related to this dedicated pipelines. Both IOT’s and SDC’s will feed int0 EAS relevant information to allow the assessment of the survey execution by SOC. Even if the key personnel is the same running IOT and SDC tasks, a clear functional split across the two domains may be desirable.
</p>
</div>
</li></ol>
</div>


<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> Euclid SOC Architecture Design</h4>
<div class="outline-text-4" id="text-1-1-2">
</div><ol class="org-ol"><li><a id="sec-1-1-2-1" name="sec-1-1-2-1"></a>Euclid SOC responsibilities<br  /><div class="outline-text-5" id="text-1-1-2-1">
<p>
The SOC is the only interface to the MOC during routine operations, and is in charge of the following satellite and payload operations specific tasks:
</p>
<ul class="org-ul">
<li>planning the surveys, based on observing guidelines by the EST,
</li>
<li>scheduling the spacecraft slews and the exposures
</li>
<li>handling instrument operations/maintenance requests from the EMC,
</li>
<li>monitoring the survey performance,
</li>
<li>first-level quality control and monitoring of the instrument health,
</li>
<li>rescheduling as required in case of anomalies,
</li>
<li>requesting MOC action via predefined procedures and sequences of telecommands
</li>
</ul>

<p>
The SOC receives the housekeeping, pointing, and science data from MOC and archives them. It derives Level 1 products for ingestion into the EAS. They are also used for quick-look analysis and first level quality control of the data.
</p>

<p>
The SOC is responsible for operating the EAS and populating it with the data and mission products produced by the SDCs. It manages the access rights to the EAS.
</p>

<p>
The SOC takes the lead in the overall design and engineering of the SGS, and, under scientific supervision of the EST, organizes and manages the end-to-end tests, to validate the SGS data processing pipelines, interfaces, and operational processes.
</p>

<p>
The SOC is responsible for the development, procurement, integration, validation and maintenance of all the software and hardware systems which it operates.
</p>
</div>
</li>

<li><a id="sec-1-1-2-2" name="sec-1-1-2-2"></a>Euclid SOC Subsystems<br  /><div class="outline-text-5" id="text-1-1-2-2">
<dl class="org-dl">
<dt> QLA </dt><dd>Quick Look Analysis
</dd>
<dt> HMS </dt><dd>Health Monitoring System
</dd>
<dt> ESS </dt><dd>Euclid Survey System
</dd>
<dt> SIS </dt><dd>SOC Interface System
</dd>
<dt> SCS </dt><dd>SOC Command System
</dd>
<dt> SAS </dt><dd>SOC Ancillary Systems
</dd>
<dt> L1P </dt><dd>Level 1 Processing
</dd>
<dt> EAS@S </dt><dd>Euclid Archive System at SOC
</dd>
<dt> SOC Storage </dt><dd>Storage at SOC
</dd>
</dl>
</div>
</li></ol>
</div>


<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> QLA Subsystem</h4>
<div class="outline-text-4" id="text-1-1-3">
</div><ol class="org-ol"><li><a id="sec-1-1-3-1" name="sec-1-1-3-1"></a>QLA Capabilities<br  /><ol class="org-ol"><li><a id="sec-1-1-3-1-1" name="sec-1-1-3-1-1"></a>Introduction<br  /><div class="outline-text-6" id="text-1-1-3-1-1">
<p>
The aim of this page is to present a first draft of the quick-look analysis tool requirements run at the SOC.
</p>

<p>
Part of the Euclid SOC duties during mission operation is to quickly assess the quality of science data and the associated telemetry. The SOC is responsible to implement in a Quick Look Analysis (QLA) tool capable of:
</p>

<ul class="org-ul">
<li>Automatically check S/C data, produce and ingest reports in the Euclid Archive System within 48 hours from data retrieval to confirm that the data are correct and eventually quickly react to issues. The IOT (instrument operation team) and EC (Euclid consortium) will investigate the data in further details, but in can take some weeks as the data is foreseen to be reduced once a larger sky patch has been observed
</li>
<li>Facilitate data inspection by the user (mainly instrument scientists) in case further data inspection is needed, e.g. being capable of accessing detectors data, showing it and/or exporting it to external programs
</li>
</ul>
</div>
</li>

<li><a id="sec-1-1-3-1-2" name="sec-1-1-3-1-2"></a>Short Description<br  /><div class="outline-text-6" id="text-1-1-3-1-2">
<p>
The standard, wide-survey observing sequence for Euclid is defined as:
</p>

<ul class="org-ul">
<li>Each observing field is observed 4 times, i.e. 4 dither positions. The S/C is moved slightly (50-100 arcsec) from one dither to the next.
</li>
<li>For each dither position, a long (565s) VIS exposure is taken together with a NISP spectroscopy (NISP-S). This is followed by 3 NISP photometry (NISP-P) exposures taken in 3 different bands (Y, J and H)
</li>
<li>During one of the 4 dithers, VIS will execute a short exposure contiguously with the second NISP-P one (NdL: what happens in the other dithers? I remember VIS was never idle)
</li>
<li>Between one dither and the next, shirt calibration exposures may take place (TBD)
</li>
<li>During the S/C slews to move from one field to the next, both VIS and NISP will run (short) calibration exposures
</li>
</ul>

<p>
QLA is foreseen to mainly work on the following type of data:
</p>

<ul class="org-ul">
<li>Level 0: it is the raw, compressed data as downloaded from the S/C. Analysis is done per exposure, per instrument, per detector and per quadrant (for VIS)
</li>
<li>Level 1: it is uncompressed, time ordered and with associated pointing) science data. Analysis is done per exposure, per detector and per quadrant (for VIS)
</li>
<li>Comparison/combination of the 4 dithers (per instrument, per band) will be needed to check relative astrometry and a first assessment of the cosmic ray impact
</li>
<li>Some checks (e.g. to quickly estimate the PSF) may need light data processing, i.e. to create a level 1.5 on-the-fly eventually using calibration data; in such a scenario, the calibration data to be used is going to be the last delivered by the IOTs
</li>
</ul>
</div>
</li></ol>
</li>

<li><a id="sec-1-1-3-2" name="sec-1-1-3-2"></a>QLA Functionalities<br  /><ol class="org-ol"><li><a id="sec-1-1-3-2-1" name="sec-1-1-3-2-1"></a>Pointing QLA checks<br  /><div class="outline-text-6" id="text-1-1-3-2-1">
<ul class="org-ul">
<li>Using VIS data when available and NISP-P otherwise, QLA should check the absolute astrometry of each exposure using an external catalogue as reference.
</li>
<li>QLA should also check the relative astrometry among dithers using wither an external catalogue and/or catalogues generated from VIS/NISP-P images themselves
</li>
<li>Most astrometric tools will also give as output an estimation of geometry of the focal plane. This could also be checked (NdL: I don't know, with the light processing we could run in QLA, how much this could be reliable. From the simulations I ran, astrometry should be)
</li>
<li>An automatic check between adjacent observing fields is not foreseen in QLA, but it would be good to have a manual option to eventually check it
</li>
</ul>
</div>
</li>

<li><a id="sec-1-1-3-2-2" name="sec-1-1-3-2-2"></a>VIS QLA checks<br  /><div class="outline-text-6" id="text-1-1-3-2-2">
<p>
The following are a list of QLA checks discussed with the VIS IDT in January 2015:
</p>

<ol class="org-ol">
<li>Looks at the header information to identify what type of an exposure (science, bias, flat, CTI, dark, non-linearity), check that this correspond to the expected commanding sequence and adjust QLA threshold checks accordingly
<ul class="org-ul">
<li>Do pre- and over-scan analysis of all CCDs for every exposure
</li>
<li>Derive histograms from imaging area pixel data of all files, but have different interpretation and threshold for different file types.
</li>
</ul>
</li>
<li>Pre- and over-scan regions, single exposure:
<ul class="org-ul">
<li>Charge trailing should be checked from the post-scan, while pre-scan can provide information regarding electronic effects if not settled yet.
</li>
<li>The minimum statistics to check are mean and variance.
<ul class="org-ul">
<li>Need to set thresholds for each of the 144 quadrant.
</li>
<li>Hardware requirements should limit the variations to 2ADUs, but there is also noise. The noise should not exceed 4.5 electrons or we are violating the requirement.
</li>
<li>However, to work in electrons requires knowledge of the gain, while SOC might work only in DNs. One can of course derive a crude limit in DNs as well.
</li>
</ul>
</li>
<li>It was also proposed to compare to previous values, but this might be too involved and related to trending. To be seen&#x2026;
</li>
</ul>
</li>
<li>Imaging area, single exposure:
<ul class="org-ul">
<li>Look for zeros, should not be any.
<ul class="org-ul">
<li>Dead pixels are at the ADC offset level.
</li>
<li>Comparison with calibrated data (mask of dead and noisy pixels) should be possible.
</li>
</ul>
</li>
<li>How many pixels below average ADC offset (derived from e.g. the post-scan)?
<ul class="org-ul">
<li>Related to the total noise (now including e.g. sky background and scattered light noise).
</li>
</ul>
</li>
<li>Histogram of the pixel data.
<ul class="org-ul">
<li>Standard deviation of a fitted Gaussian is a proxy for the total noise, this is of importance for the weak lensing noise bias.
</li>
</ul>
</li>
<li>How many pixels are saturated?
<ul class="org-ul">
<li>We could derive a average value e.g. from the expected number of bright stars. Clearly the number of saturated pixels in any given quadrant should be fairly small, otherwise indicates a problem.
</li>
</ul>
</li>
<li>Fitting Gaussian to bright high SNR stars to derive FWHM to have a proxy for focus.
<ul class="org-ul">
<li>Or simply 3x3 matrix around bright peak and derive proxy for size and hence focus, also AOCS/FGS performance (e.g. no elliptical Gaussian or profile).
</li>
</ul>
</li>
</ul>
</li>
<li>Four images:
<ul class="org-ul">
<li>Probably not stacking/combining; QLA is not about image processing.
</li>
<li>Cosmic ray identification with simple offsets derived from pointing (or other) information.
</li>
<li>Difference images; statistics of the difference image.
</li>
<li>This might get very involved and CPU intensive, so we should consider it to be of low priority.
</li>
</ul>
</li>
<li>Flat fields:
<ul class="org-ul">
<li>Average level should always be larger than TBD.
<ul class="org-ul">
<li>Otherwise either the LED has failed or is very faint for some reason.
</li>
<li>We can probably derive a minimum level that is independent of the colour of the LED, otherwise we could have several minimum levels.
</li>
</ul>
</li>
<li>There should not be more than TBD pixels below e.g. 10ek- (dead pixels and columns).
</li>
<li>One could also look at the structure over e.g. the full focal plane, but again, this might be too time consuming.
</li>
<li>The noise in the image should be consistent with Poisson (when taking into covariance resulting from electron migration / leakage).
</li>
</ul>
</li>
<li>Charge injection lines:
<ul class="org-ul">
<li>Ratio first line wrt. the others, tells something about the detection system independent of the optical stimulus.
</li>
</ul>
</li>
<li>Bias / Dark:
<ul class="org-ul">
<li>There should never be pixels with more than X counts except the hot pixels. Otherwise there is light leakage coming for example from the scattering from the FGS.
</li>
<li>Better understanding of the noise.
</li>
<li>One could envision looking at the power spectrum of the pixel data to confirm that there is no structure in the noise for example because of EMC from the FGS etc.
</li>
</ul>
</li>
<li>Automatic reporting and error identification.
</li>
<li>QLA will not create any intermediate data products, but will only look at the raw images.
</li>
</ol>
</div>
</li>

<li><a id="sec-1-1-3-2-3" name="sec-1-1-3-2-3"></a>NISP QLA checks<br  /></li>

<li><a id="sec-1-1-3-2-4" name="sec-1-1-3-2-4"></a>QLA data analysis capabilities<br  /></li></ol>
</li>

<li><a id="sec-1-1-3-3" name="sec-1-1-3-3"></a>QLA Components<br  /><ol class="org-ol"><li><a id="sec-1-1-3-3-1" name="sec-1-1-3-3-1"></a>QLA-VIM - Visualization and MMI<br  /><div class="outline-text-6" id="text-1-1-3-3-1">
<p>
Set of components supporting data visualization and human analysis routines. It interacts internally with the CAM module for different configurations and runs.
</p>
</div>
</li>

<li><a id="sec-1-1-3-3-2" name="sec-1-1-3-3-2"></a>QLA-SIF - SOC Interface<br  /><div class="outline-text-6" id="text-1-1-3-3-2">
<p>
Interface to other SOC components, and to external data received at SOC. It includes the interface with EAS.
</p>
</div>
</li>

<li><a id="sec-1-1-3-3-3" name="sec-1-1-3-3-3"></a>QLA-SDA - Science Data Analysis<br  /><div class="outline-text-6" id="text-1-1-3-3-3">
<p>
Set of routines analysing the science images. It deals with pixel data analysis.
</p>
</div>
</li>

<li><a id="sec-1-1-3-3-4" name="sec-1-1-3-3-4"></a>QLA-REP - Reporting<br  /><div class="outline-text-6" id="text-1-1-3-3-4">
<p>
Component in charge of automatic report generation.
</p>
</div>
</li>

<li><a id="sec-1-1-3-3-5" name="sec-1-1-3-3-5"></a>QLA-QAF - Quality Analysis Flagging<br  /><div class="outline-text-6" id="text-1-1-3-3-5">
<p>
In charge of setting and defining values of predefined flags and fields from the analysis to be used for LE1 product expansion
</p>
</div>
</li>

<li><a id="sec-1-1-3-3-6" name="sec-1-1-3-3-6"></a>QLA-PDA - PUS Data Analysis<br  /><div class="outline-text-6" id="text-1-1-3-3-6">
<p>
Set of routines analysing the PUS (HKTM) data
</p>
</div>
</li>

<li><a id="sec-1-1-3-3-7" name="sec-1-1-3-3-7"></a>QLA-PAR - Parameter Extraction<br  /><div class="outline-text-6" id="text-1-1-3-3-7">
<p>
Component in charge of extraction of time based parameters from the analysis and export as files to be used by the HMS. It is TBD if this component shall only generate the Science and Auxiliary
</p>
</div>
</li>

<li><a id="sec-1-1-3-3-8" name="sec-1-1-3-3-8"></a>QLA-CDA - Combined Data Analysis<br  /><div class="outline-text-6" id="text-1-1-3-3-8">
<p>
Set of routines implementing a combined analysis across science (inter-instrument, multi- dither), and/or across pixel and other type of data: PUS and ancillary data
</p>
</div>
</li>

<li><a id="sec-1-1-3-3-9" name="sec-1-1-3-3-9"></a>QLA-CAM - Configuration and Monitoring<br  /><div class="outline-text-6" id="text-1-1-3-3-9">
<p>
Configuration of the subsystem, including specific information related to the data to be analysed (extracted from ESS). Monitor of performance and generation of log data. It also updates system configuration based on external sources (i.e. HMS reports and or limits)
</p>
</div>
</li>

<li><a id="sec-1-1-3-3-10" name="sec-1-1-3-3-10"></a>QLA-ADA - Auxiliary Data Analysis<br  /><div class="outline-text-6" id="text-1-1-3-3-10">
<p>
Set of routines analysing the MOC and other ancillary data (ESS, Configuration)
</p>
</div>
</li>

<li><a id="sec-1-1-3-3-11" name="sec-1-1-3-3-11"></a>QLA-PRO - Processing<br  /><div class="outline-text-6" id="text-1-1-3-3-11">
<p>
Routines to process raw or LE1 data if required with support of calibrated data to the required level for the analysis
</p>
</div>
</li></ol>
</li>

<li><a id="sec-1-1-3-4" name="sec-1-1-3-4"></a>QLA User Stories<br  /><div class="outline-text-5" id="text-1-1-3-4">
<p>
<b>[TBD]</b>
</p>
</div>
</li>

<li><a id="sec-1-1-3-5" name="sec-1-1-3-5"></a>QLA Functional Decomposition<br  /><div class="outline-text-5" id="text-1-1-3-5">
<p>
The QLA Logical Decomposition shown above in the previous section is a good way to study the entire functionality of the QLA.  In practice, however, we defined two different <span class="underline">Functionality Domains</span>:
</p>

<dl class="org-dl">
<dt> QLA Processing/Algorithmic Functions </dt><dd>It is formed by the set of libraries and processing elements that perform the different analysis on the input data.
</dd>

<dt> QLA Processing Framework </dt><dd>It has an entire set of different functions to provide the infrastructure needed for the QLA processing:
<ul class="org-ul">
<li>reception and storage of input files and their metadata
</li>
<li>orchestration of the different processing tasks according to a set of pre-defined, user-modifiable rules,
</li>
<li>scheduling of the processing tasks to be executed upon rule firing
</li>
<li>monitoring of the different processing tasks
</li>
<li>storage of processing output products
</li>
<li>dissemination and reporting of the processing results
</li>
<li>incorporation of an interactive graphical user interface for the exploration of the processing results, including the ability to export input/output data for further processing and study to external tools
</li>
</ul>
</dd>
</dl>

<p>
In the next section, the QLA Processing Framework is further described.
</p>
</div>
</li></ol>
</div>
</div>


<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> The QLA Processing Framework (QPF)</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> Purpose</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
Our intention is to create a framework for the execution of the different processing tasks that must be performed on the Euclid data (science products and calibration products) by the QLA.  In the following sections, We refer to this framework as the QPF (<i>QLA Processing Framework</i>).
</p>

<p>
The QPF will be composed of a set of components that take the incoming external events and data, check their basic consistency, perform a specific orchestration based on the type of incoming data, and launches the neccessary processing tasks to end up with the set of diagnostics, statistics and output parameters to evaluate the validity and quality of the products.  In section <a href="#sec-1-2-3">1.2.3</a> a detailed description of them is provided.
</p>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> QPF Overall Architecture</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
The architecture of the QPF has the following main drivers:
</p>

<dl class="org-dl">
<dt> Independent execution </dt><dd>Each of the components works independently of the others.
</dd>

<dt> Message-based communication </dt><dd>The activities of the different components are synchronised by means of message-based communication.  A single message can be sent by a component to any of the other components, to a group of them, or to the entire set of components.  Components process the messages they receive, and perform their tasks accordingly
</dd>

<dt> Service oriented </dt><dd>Each of the components behaves like a service provider element, acting upon request (after a message from another component).
</dd>

<dt> Encapsulated task execution </dt><dd>The Orchestration function provides to the Task Manager function the information about the processing task that must be executed on a data set.  The Task Manager function is deveoted to the lunching of the different tasks, that will be encapsulated and isolated from the main host system.  File based input and output is the only interface between the system and the different Processing Elements.
</dd>

<dt> Database storage </dt><dd>The configuration configuration, products metadata, task execution information, exchanged messages, alarms, etc. are stored in a dedicated database, to facilitate the system operation as well as the access form external applications to the overall system information.
</dd>

<dt> System persistence </dt><dd>The system establishes an strategy to allow it to be persistent upon failures.
</dd>
</dl>

<p>
The overall architecture of the QPF is shown in the following figure.
</p>

<p>
<i>QPF_Architecture.png</i>
</p>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> QPF Components</h4>
<div class="outline-text-4" id="text-1-2-3">
</div><ol class="org-ol"><li><a id="sec-1-2-3-1" name="sec-1-2-3-1"></a>Event Manager<br  /><div class="outline-text-5" id="text-1-2-3-1">
<p>
The Event Manager is in charge of receiving all external input messages and process them.  This processing most of the cases involves the transmission of new messages to other system components, requesting data saving or registration, task orchestration, etc.
</p>

<p>
A special data channel exists between the HMI and the Event Manager: the HMI shall be able to send messages to the Event Manager requesting some information, and the Event Manager shall asnwer these messages with the appropriate, available information.
</p>
</div>
</li>

<li><a id="sec-1-2-3-2" name="sec-1-2-3-2"></a>HMI<br  /><div class="outline-text-5" id="text-1-2-3-2">
<p>
The HMI has several functionalities:
</p>
<ul class="org-ul">
<li>provide information about the different actions and messages that take place in the system
</li>
<li>provide feedback to the operator on the processing status of the different processing tasks
</li>
<li>shows a view of the current status of the Data Manager registration area
</li>
<li>provides to the operator of the capability of sending fake input messages to the Event Manager (for testing purposes)
</li>
<li>upon request, provides information from the Event Manager on the current status of the entire system.
</li>
</ul>
</div>
</li>

<li><a id="sec-1-2-3-3" name="sec-1-2-3-3"></a>QPF Database<br  /><div class="outline-text-5" id="text-1-2-3-3">
<p>
The entire set of data handled by the QPF, from the system configuration to the input/output products metadata, orchestration rules, etc. is stored in a central DB system.  This simplifies the access of the system data to external tools.
</p>
</div>
</li>

<li><a id="sec-1-2-3-4" name="sec-1-2-3-4"></a>Data Manager<br  /><div class="outline-text-5" id="text-1-2-3-4">
<p>
The Data Manager is devoted to the registration of incoming products metadata.  In this sense, whenever a processing task is delivered, the required input products metadata will be obtained from the Data Manager.
</p>

<p>
In case a data set (auxiliary files or whatsoever) is needed and has not been registered into the Data Manager, this component will perform a request to the Archive (TBD).
</p>
</div>
</li>

<li><a id="sec-1-2-3-5" name="sec-1-2-3-5"></a>Log Manager<br  /><div class="outline-text-5" id="text-1-2-3-5">
<p>
The Log Manager is in charge of synchronising the log information from the different system components.
</p>
</div>
</li>

<li><a id="sec-1-2-3-6" name="sec-1-2-3-6"></a>Orchestrator<br  /><div class="outline-text-5" id="text-1-2-3-6">
<p>
The orchestrator has the information about the processing elements that can be invoked whenever a set of input data products is available.  When this processing can be invoked, a request is sent to the Task Manager with the appropriate information.
</p>
</div>
</li>

<li><a id="sec-1-2-3-7" name="sec-1-2-3-7"></a>Task Manager<br  /><div class="outline-text-5" id="text-1-2-3-7">
<p>
The Task Manager receives information about processing tasks that can be executed (that is, because its required input products are available).  In turn, it selects one of the configured Task Agents for the purpose of executing and monitoring the requested processing task.
</p>
</div>
</li>

<li><a id="sec-1-2-3-8" name="sec-1-2-3-8"></a>Task Agent(s)<br  /><div class="outline-text-5" id="text-1-2-3-8">
<p>
The Task Agents are the ultimate responsible for the execution of the different tasks.  They:
</p>

<ul class="org-ul">
<li>receive all the neccessary information about these tasks,
</li>
<li>invoke the selected processing element,
</li>
<li>monitor the execution of the processing elements, and
</li>
<li>provide feedback on the resulting execution to the Task Manager.
</li>
</ul>
</div>
</li>

<li><a id="sec-1-2-3-9" name="sec-1-2-3-9"></a>Processing Elements<br  /><div class="outline-text-5" id="text-1-2-3-9">
<p>
Each of the different processing algorithmic tasks that ultimately execute the final algorithms on the product data, and provide output information to be either disseminated or further processed by the system
</p>

<p>
In the current approach, the processing elements are tasks that run into Docker containers.
</p>


<div class="figure">
<p><img src="procelem_plantuml.png" alt="procelem_plantuml.png" />
</p>
</div>
</div>
</li></ol>
</div>
</div>


<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> QPF Internals</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Technologies</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
For the so-called QPF Toy Model (a proof of concept of the proposed QPF), the following technologies are planned to be used.
</p>

<dl class="org-dl">
<dt> +LSST Libraries </dt><dd>Processing Elements will be LSST based.+
</dd>

<dt> Docker </dt><dd>Task Agents will be Docker containers, running independently, with an embeded Processing Element included and with file-based interface with the host system and with the Task Manager
</dd>

<dt> Zabbix </dt><dd>Zabbix will be used as Monitoring solution for the entire set of components of the system
</dd>

<dt> 0MQ </dt><dd>Communications among the different managment components (all but the processing elements) will used Zero-MQ sockets for their communications
</dd>

<dt> PostgreSQL </dt><dd>The system configuration, alarms, product metadata, etc. will be stored in a PostgreSQL database.
</dd>

<dt> PCRE2 </dt><dd>File name templates will be compiled against PCRE2 library.
</dd>

<dt> Qt </dt><dd>The HMI component will be based on Qt and coded on C++.  For the Toy Model, the HMI will be responsible also for providing appropriate input events and data to the system via the Event Manager.
</dd>

<dt> C++ </dt><dd>All managment components will be coded in C++.
</dd>
</dl>
</div>
</div>



<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Specification</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
This section contains obsolete structures and information, and is process of being updated.
</p>
</div>

<ol class="org-ol"><li><a id="sec-1-3-2-1" name="sec-1-3-2-1"></a>QPF Database Specification<br  /><div class="outline-text-5" id="text-1-3-2-1">

<div class="figure">
<p><img src="db-config_plantuml.png" alt="db-config_plantuml.png" />
</p>
</div>


<div class="figure">
<p><img src="db-products_plantuml.png" alt="db-products_plantuml.png" />
</p>
</div>


<div class="figure">
<p><img src="db-tasks_plantuml.png" alt="db-tasks_plantuml.png" />
</p>
</div>


<div class="figure">
<p><img src="db-msg_plantuml.png" alt="db-msg_plantuml.png" />
</p>
</div>


<div class="figure">
<p><img src="db-alarms_plantuml.png" alt="db-alarms_plantuml.png" />
</p>
</div>

<p>
Or everything together
</p>


<div class="figure">
<p><img src="db.png" alt="db.png" />
</p>
</div>


<p>
This structure can be created with the following code (PostgreSQL):
</p>

<div class="org-src-container">

<pre class="src src-sql">CREATE TABLE "config_general" (
        "parameter" VARCHAR(32) NOT NULL,
        "content" VARCHAR(256) NOT NULL,
        CONSTRAINT config_general_pk PRIMARY KEY ("parameter")
) WITH (
  OIDS=FALSE
);

CREATE TABLE "config_nodes" (
        "name" VARCHAR(20) NOT NULL,
        "type" VARCHAR(20) NOT NULL,
        "clientAddr" VARCHAR(128) NOT NULL,
        "serverAddr" VARCHAR(128) NOT NULL,
        CONSTRAINT config_nodes_pk PRIMARY KEY ("name")
) WITH (
  OIDS=FALSE
);

CREATE TABLE "config_orchestration" (
        "ruleId" integer NOT NULL,
        "inputs" VARCHAR(1024) NOT NULL,
        "outputs" VARCHAR(1024) NOT NULL,
        "processorId" integer NOT NULL,
        CONSTRAINT config_orchestration_pk PRIMARY KEY ("ruleId","processorId")
) WITH (
  OIDS=FALSE
);

CREATE TABLE "config_processors" (
        "processorId" integer NOT NULL,
        "processorName" VARCHAR(1024) NOT NULL,
        "exePath" VARCHAR(1024) NOT NULL,
        "inputPath" VARCHAR(1024) NOT NULL,
        "outputPath" VARCHAR(1024) NOT NULL,
        CONSTRAINT config_processors_pk PRIMARY KEY ("processorId")
) WITH (
  OIDS=FALSE
);

CREATE TABLE "config_products" (
        "productType" VARCHAR(128) NOT NULL,
        CONSTRAINT config_products_pk PRIMARY KEY ("productType")
) WITH (
  OIDS=FALSE
);

CREATE TABLE "products_info" (
        "id" integer NOT NULL,
        "productId" VARCHAR(256) NOT NULL,
        "productType" VARCHAR(128) NOT NULL,
        "productStatus" integer NOT NULL,
        "productVersion" VARCHAR(128) NOT NULL,
        "productSize" integer NOT NULL,
        "creatorId" integer NOT NULL,
        "instrumentId" integer NOT NULL,
        "obsMode" integer NOT NULL,
        "startTime" DATETIME NOT NULL,
        "endTime" DATETIME NOT NULL,
        "registrationTime" DATETIME NOT NULL,
        "url" VARCHAR(1024) NOT NULL,
        CONSTRAINT products_info_pk PRIMARY KEY ("id","productId","productType","productStatus","creatorId","instrumentId","obsMode")
) WITH (
  OIDS=FALSE
);

CREATE TABLE "product_status" (
        "productStatus" integer NOT NULL,
        "statusDesc" integer NOT NULL,
        CONSTRAINT product_status_pk PRIMARY KEY ("productStatus")
) WITH (
  OIDS=FALSE
);

CREATE TABLE "instruments" (
        "instrumentId" integer NOT NULL,
        "instrument" VARCHAR(128) NOT NULL,
        CONSTRAINT instruments_pk PRIMARY KEY ("instrumentId")
) WITH (
  OIDS=FALSE
);

CREATE TABLE "creators" (
        "creatorId" integer NOT NULL,
        "creatorDesc" VARCHAR(128) NOT NULL,
        CONSTRAINT creators_pk PRIMARY KEY ("creatorId")
) WITH (
  OIDS=FALSE
);

CREATE TABLE "observation_modes" (
        "obsMode" integer NOT NULL,
        "obsModeDesc" VARCHAR(128) NOT NULL,
        CONSTRAINT observation_modes_pk PRIMARY KEY ("obsMode")
) WITH (
  OIDS=FALSE
);


ALTER TABLE "config_orchestration" ADD CONSTRAINT config_orchestration_fk0 FOREIGN KEY (processorId) REFERENCES config_processors(processorId);

ALTER TABLE "products_info" ADD CONSTRAINT products_info_fk0 FOREIGN KEY (productStatus) REFERENCES product_status(productStatus);
ALTER TABLE "products_info" ADD CONSTRAINT products_info_fk1 FOREIGN KEY (productType) REFERENCES config_products(productType);
ALTER TABLE "products_info" ADD CONSTRAINT products_info_fk2 FOREIGN KEY (creatorId) REFERENCES creators(creatorId);
ALTER TABLE "products_info" ADD CONSTRAINT products_info_fk3 FOREIGN KEY (instrumentId) REFERENCES instruments(instrumentId);
ALTER TABLE "products_info" ADD CONSTRAINT products_info_fk4 FOREIGN KEY (obsMode) REFERENCES observation_modes(obsMode);
</pre>
</div>
</div>
</li>
<li><a id="sec-1-3-2-2" name="sec-1-3-2-2"></a>Sample QPF Configuration<br  /><div class="outline-text-5" id="text-1-3-2-2">
<div class="org-src-container">

<pre class="src src-json">{
    "general": {
        "app_name": "QPF",
        "app_version": "1.0rc2",
        "last_access": "20150616T121555",
        "run_path": "/home/eucops/qpf/run"
    },
    "nodes" : {
        "hmi_node" : "QPFHMI",
        "master_machine" : "eucdev02.net3.lan",
        "node_list" : {
            "DataMng" : { "client" : "tcp://10.66.180.97:7101", "server" : "tcp://*:7101", "type" : "datamng" },
            "EvtMng" : { "client" : "tcp://10.66.180.97:7100", "server" : "tcp://*:7100", "type" : "evtmng" },
            "LogMng" : { "client" : "tcp://10.66.180.97:7102", "server" : "tcp://*:7102", "type" : "logmng" },
            "QPFHMI" : { "client" : "tcp://10.66.180.97:7999", "server" : "tcp://*:7999", "type" : "hmi" },
            "TskMng" : { "client" : "tcp://10.66.180.97:7104", "server" : "tcp://*:7104", "type" : "taskmng" },
            "TskOrc" : { "client" : "tcp://10.66.180.97:7103", "server" : "tcp://*:7103", "type" : "taskorc" },
            "TskAge1" : { "client" : "tcp://10.66.180.97:7111", "server" : "tcp://*:7111", "type" : "taskagent" },
            "TskAge2" : { "client" : "tcp://10.66.180.97:7112", "server" : "tcp://*:7112", "type" : "taskagent" },
            "TskAge3" : { "client" : "tcp://10.66.180.95:7113", "server" : "tcp://*:7113", "type" : "taskagent" },
            "TskAge4" : { "client" : "tcp://10.66.180.95:7114", "server" : "tcp://*:7114", "type" : "taskagent" },
            "TskAge5" : { "client" : "tcp://10.66.180.95:7115", "server" : "tcp://*:7115", "type" : "taskagent" },
            "TskAge6" : { "client" : "tcp://10.66.180.95:7116", "server" : "tcp://*:7116", "type" : "taskagent" },
            "TskAge7" : { "client" : "tcp://10.66.180.95:7117", "server" : "tcp://*:7117", "type" : "taskagent" }
        }
    },
    "machines" : {
        "eucdev02.net3.lan" : [ "QPFHMI", "EvtMng", "DataMng", "LogMng", "TskOrc", "TskMng", "TskAge1", "TskAge2" ],
        "eucdev03.net3.lan" : [ "TskAge3", "TskAge4", "TskAge5", "TskAge6", "TskAge7" ]
    },
    "connections" : {
        "DataMng" : [ "EvtMng", "TskMng", "TskOrc" ],
        "EvtMng" : [ "QPFHMI", "DataMng", "LogMng", "TskMng", "TskOrc", "TskAge1", "TskAge2", "TskAge3", "TskAge4", "TskAge5", "TskAge6", "TskAge7" ],
        "LogMng" : [ "EvtMng", "TskAge1", "TskAge2", "TskAge3", "TskAge4", "TskAge5", "TskAge6", "TskAge7" ],
        "QPFHMI" : [ "EvtMng" ],
        "TskAge1" : [ "EvtMng", "LogMng", "TskMng" ],
        "TskAge2" : [ "EvtMng", "LogMng", "TskMng" ],
        "TskAge3" : [ "EvtMng", "LogMng", "TskMng" ],
        "TskAge4" : [ "EvtMng", "LogMng", "TskMng" ],
        "TskAge5" : [ "EvtMng", "LogMng", "TskMng" ],
        "TskAge6" : [ "EvtMng", "LogMng", "TskMng" ],
        "TskAge7" : [ "EvtMng", "LogMng", "TskMng" ],
        "TskMng" : [ "EvtMng", "TskOrc", "DataMng", "TskAge1", "TskAge2", "TskAge3", "TskAge4", "TskAge5", "TskAge6", "TskAge7" ],
        "TskOrc" : [ "EvtMng", "TskMng", "DataMng" ]
    },
    "db": {
        "host": "127.0.0.1",
        "port": "5432",
        "name": "qpfdb",
        "user": "eucops",
        "pwd": ""
    },
    "products": {
        "product_types": [
            "VIS_RAW",
            "VIS_INFO",
            "VIS_LE1",
            "VIS_LE1_LOG",
            "VIS_LE1_META",
            "VIS_LE1_INGLOG",
            "NIR_RAW",
            "NIR_INFO",
            "NIR_LE1",
            "NIR_LE1_LOG",
            "NIR_LE1_META",
            "NIR_LE1_INGLOG",
            "SIR_RAW",
            "SIR_INFO",
            "SIR_LE1",
            "SIR_LE1_LOG",
            "SIR_LE1_META",
            "SIR_LE1_INGLOG",
            "HK_RAW",
            "HK_QLA",
            "UNKNOWN_TYPE"],
        "parsing_regex": "@filenamespec.tpl",
        "parsing_assign": "%T=1+2;%I=1;%S=3;%D=4;%f=4;%v=5",
        "product_id_tpl": "%M_%T_%S_%f",
        "data_ext": "fits",
        "meta_ext": "xml",
        "log_ext": "log"
    },
    "orchestration": {
        "rules": {
            "VIS_LE1_Processing": {
                "inputs": "VIS_RAW",
                "outputs": "VIS_LE1,VIS_LE1_LOG",
                "processing": "LE1_VIS_Processor",
                "condition": "1"
            },
            "VIS_LE1_MetadataCollection": {
                "inputs": "VIS_INFO",
                "outputs": "VIS_LE1_META",
                "processing": "LE1_VIS_MetadataCollector",
                "condition": "1"
            },
            "VIS_LE1_Ingestion": {
                "inputs": "VIS_LE1,VIS_LE1_META",
                "outputs": "VIS_LE1_INGLOG",
                "processing": "LE1_VIS_Ingestor",
                "condition": "(VIS_LE1.date==VIS_LE1_META.date) &amp; (VIS_LE1.time==VIS_LE1_META.time)"
            }
        }
    },
    "processing": {
        "processors": {
            "LE1_VIS_Processor": {
                "exe_path": "/opt/pe/bin",
                "input_path": "/opt/pe/input",
                "name": "LE1_VIS_Processor",
                "output_path": "/opt/pe/output"
            },
            "LE1_VIS_MetadataCollector": {
                "exe_path": "/opt/pe/bin",
                "input_path": "/opt/pe/input",
                "name": "LE1_VIS_MetadataCollector",
                "output_path": "/opt/pe/output"
            },
            "LE1_VIS_Ingestor": {
                "exe_path": "/opt/pe/bin",
                "input_path": "/opt/pe/input",
                "name": "LE1_VIS_Ingestor",
                "output_path": "/opt/pe/output"
            }
        }
    },
    "storage": {
        "base": {
            "path": "/home/eucops/qpf/run"
        },
        "incoming": {
            "protocol": "NOTUSED",
            "address":  "0.0.0.0",
            "port":     "0",
            "user":     "xxxxx",
            "password": "yyyyy",
            "path":     "/home/eucops/qpf/data/inbox"
        },
        "local_archive": {
            "path": "/home/eucops/qpf/data/archive"
        },
        "archive": {
            "protocol": "SCP",
            "address":  "eucdev.n1data.lan",
            "port":     "",
            "user":     "eucops",
            "password": "",
            "path":     "/home/eucops/ws/jcgg/DSS_EAS_Proxy/incoming"
        },
        "gateway": {
            "path": "/home/eucops/qpf/data/gateway"
        },
        "outgoing": {
            "protocol": "NOTUSED",
            "address":  "0.0.0.0",
            "port":     "0",
            "user":     "xxxxx",
            "password": "yyyyy",
            "path":     "/home/eucops/qpf/data/outbox"
        }
    }
}
</pre>
</div>
</div>
</li>

<li><a id="sec-1-3-2-3" name="sec-1-3-2-3"></a>Alarm System<br  /><div class="outline-text-5" id="text-1-3-2-3">
<p>
The QPF includes an Alarm System with the following components:
</p>
</div>

<ol class="org-ol"><li><a id="sec-1-3-2-3-1" name="sec-1-3-2-3-1"></a>Alarm Database<br  /><div class="outline-text-6" id="text-1-3-2-3-1">
<p>
The Alarm Database stores:
</p>
<ul class="org-ul">
<li>the values of the registered variables with their validity ranges
</li>
<li>the list of alarms and raised, and their current status
</li>
<li>In order to create the database with PostgresSQL, the following must be used
</li>
</ul>
</div>
</li>

<li><a id="sec-1-3-2-3-2" name="sec-1-3-2-3-2"></a>Database Controller<br  /><div class="outline-text-6" id="text-1-3-2-3-2">
<p>
A Database Controller (DBController), that allows variable registration and provides information on current alarms, upon request from a DBClient.
</p>

<p>
This Alarm System is yet to be implemented
</p>
</div>
</li></ol>
</li></ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: Time-stamp: <span class="timestamp-wrapper"><span class="timestamp">&lt;2015-03-23 14:34:32 jcgg&gt;</span></span></p>
<p class="author">Author: Jose C. Gonzalez</p>
<p class="date">Created: 2016-04-22 vie 12:36</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
